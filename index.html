<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>TECHONACCI X — Coming Soon</title>

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@400;600&family=Orbitron:wght@500;700;900&display=swap" rel="stylesheet">

  <link rel="stylesheet" href="style.css" />
</head>

<body>
  <main class="stage">
    <!-- Fibonacci glowing balls background -->
    <canvas id="fibCanvas" class="fib-canvas" aria-hidden="true"></canvas>

    <!-- Optional soft overlays -->
    <div class="vignette" aria-hidden="true"></div>

    <!-- Content Card -->
    <section class="card" aria-label="Coming Soon">
      <div class="logo">
        <span class="x">X</span>
        <span class="halo"></span>
      </div>

      <h1 class="brand">
        <span class="word">TECHONACCI</span><span class="accent">X</span>
      </h1>

      <p class="sub">
        <span>Technology</span><i>·</i><span>Fibonacci</span><i>·</i><span>Intelligent Innovation</span>
      </p>

      <div class="line"></div>

      <div class="bottom">
        <span class="chip">COMING SOON</span>
        <span class="status"><span class="dot"></span> building in public</span>
      </div>
    </section>
  </main>

  <script>
    // ===== Fibonacci Glow Balls (Canvas) =====
    const canvas = document.getElementById('fibCanvas');
    const ctx = canvas.getContext('2d');

    const DPR = Math.min(2, window.devicePixelRatio || 1);

    function resize() {
      const w = window.innerWidth;
      const h = window.innerHeight;
      canvas.width = Math.floor(w * DPR);
      canvas.height = Math.floor(h * DPR);
      canvas.style.width = w + 'px';
      canvas.style.height = h + 'px';
      ctx.setTransform(DPR, 0, 0, DPR, 0, 0);
    }
    window.addEventListener('resize', resize);
    resize();

    // Fibonacci counts per generation (cap for performance)
    const fibCounts = [1,2,3,5,8,13,21,34];
    let genIndex = 0;

    const balls = [];
    const now = () => performance.now();

    const GEN_DURATION = 2600;     // مدة كل جيل (ms)
    const FADE_TIME   = 600;      // fade in/out
    const MAX_BALLS   = 55;       // سقف للأداء

    function rand(a,b){ return a + Math.random()*(b-a); }
    function clamp(x,a,b){ return Math.max(a, Math.min(b,x)); }

    function spawnGeneration() {
      balls.length = 0;

      // count for this generation
      const count = Math.min(fibCounts[genIndex], MAX_BALLS);
      genIndex = (genIndex + 1) % fibCounts.length;

      const w = window.innerWidth;
      const h = window.innerHeight;

      // base radius grows slightly with gen
      const baseR = clamp(10 + genIndex*1.6, 10, 26);

      for (let i=0;i<count;i++){
        // distribute around a soft spiral-ish center (feels Fibonacci)
        const t = i / Math.max(1, count);
        const angle = t * Math.PI * 2 * 3.2;         // turns
        const spiral = (Math.min(w,h) * 0.33) * t;    // radius out

        const cx = w*0.50 + Math.cos(angle) * spiral;
        const cy = h*0.52 + Math.sin(angle) * spiral;

        balls.push({
          x: cx + rand(-18,18),
          y: cy + rand(-18,18),
          vx: rand(-0.12, 0.12),
          vy: rand(-0.10, 0.10),
          r: baseR * rand(0.6, 1.35),
          phase: rand(0, Math.PI*2),
          lifeStart: now(),
          lifeEnd: now() + GEN_DURATION,
          hue: rand(185, 205), // أزرق/سيان
          alpha: rand(0.25, 0.55)
        });
      }
    }

    function drawBall(b, t) {
      const w = window.innerWidth;
      const h = window.innerHeight;

      // life progress
      const age = t - b.lifeStart;
      const life = b.lifeEnd - b.lifeStart;
      const p = clamp(age / life, 0, 1);

      // fade in/out
      let a = b.alpha;
      if (age < FADE_TIME) a *= (age / FADE_TIME);
      if (life - age < FADE_TIME) a *= ((life - age) / FADE_TIME);
      a = clamp(a, 0, 1);

      // gentle pulsation
      const pulse = 1 + 0.06 * Math.sin((t/700) + b.phase);

      // move
      b.x += b.vx * 2.0;
      b.y += b.vy * 2.0;

      // wrap edges
      if (b.x < -60) b.x = w + 60;
      if (b.x > w + 60) b.x = -60;
      if (b.y < -60) b.y = h + 60;
      if (b.y > h + 60) b.y = -60;

      // glow gradient
      const r = b.r * pulse;
      const g = ctx.createRadialGradient(b.x, b.y, 0, b.x, b.y, r*3.2);
      g.addColorStop(0.0, `hsla(${b.hue}, 95%, 65%, ${a})`);
      g.addColorStop(0.25, `hsla(${b.hue}, 95%, 60%, ${a*0.55})`);
      g.addColorStop(1.0, `hsla(${b.hue}, 95%, 50%, 0)`);

      ctx.fillStyle = g;
      ctx.beginPath();
      ctx.arc(b.x, b.y, r*3.2, 0, Math.PI*2);
      ctx.fill();

      // core
      ctx.fillStyle = `hsla(${b.hue}, 95%, 75%, ${a*0.65})`;
      ctx.beginPath();
      ctx.arc(b.x, b.y, r*0.55, 0, Math.PI*2);
      ctx.fill();
    }

    function draw(t) {
      const w = window.innerWidth;
      const h = window.innerHeight;

      // clear
      ctx.clearRect(0,0,w,h);

      // base gradient background (helps depth)
      const bg = ctx.createLinearGradient(0,0,0,h);
      bg.addColorStop(0, 'rgba(2,8,18,1)');
      bg.addColorStop(0.55,'rgba(5,14,28,1)');
      bg.addColorStop(1,'rgba(2,8,18,1)');
      ctx.fillStyle = bg;
      ctx.fillRect(0,0,w,h);

      // draw balls
      for (const b of balls) drawBall(b, t);

      // subtle overlay dots
      ctx.globalAlpha = 0.10;
      ctx.fillStyle = '#ffffff';
      for (let i=0;i<40;i++){
        const x = (i*97 + (t/30)) % w;
        const y = (i*131 + (t/40)) % h;
        ctx.fillRect(x, y, 1, 1);
      }
      ctx.globalAlpha = 1;

      // generation cycle
      const oldest = balls[0];
      if (oldest && t > oldest.lifeEnd) {
        spawnGeneration();
      }

      requestAnimationFrame(draw);
    }

    spawnGeneration();
    requestAnimationFrame(draw);
  </script>
</body>
</html>
